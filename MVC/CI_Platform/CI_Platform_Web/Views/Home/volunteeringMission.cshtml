@using CI_Platform_Web.Entities.ViewModel;
@model VolunteeringMissionPageViewModel;

@{
    Layout = "_LayoutSingleHeader";
}

@*@{
    var missDetail = ViewBag.mission;
    var city = ViewBag.citylist;
    var theme = ViewBag.themelist;
    var orgName = ViewBag.orgname;
}*@



<head>

    <link rel="stylesheet" href="~/css/volunteeringMission.css">
    <link rel="stylesheet" href="~/css/home.css">
    <title>Reset-Password</title>

</head>



<!-- Volunteering Mission Image And Details -->

<div class="container mt-3">
    <div class="row ">

        <!-- Image Slider -->

        <div class="col-12 col-sm-12 col-md-6 col-lg-6">


            <!-- image carausol start -->
            <section class="csec">
                <div class="container">
                    <div class="carousel">
                        <input type="radio" name="slides" checked="checked" id="slide-1">
                        <input type="radio" name="slides" id="slide-2">
                        <input type="radio" name="slides" id="slide-3">
                        <input type="radio" name="slides" id="slide-4">

                        <ul class="carousel__slides">
                            <li class="carousel__slide">
                                <figure>
                                    <div>
                                        <img src="~/images/img11.png" alt="">
                                    </div>

                                </figure>
                            </li>
                            <li class="carousel__slide">
                                <figure>
                                    <div>
                                        <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-2.png"
                                             alt="">
                                    </div>

                                </figure>
                            </li>
                            <li class="carousel__slide">
                                <figure>
                                    <div>
                                        <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-2.png"
                                             alt="">
                                    </div>

                                </figure>
                            </li>
                            <li class="carousel__slide">
                                <figure>
                                    <div>
                                        <img src="~/images/image1.png" alt="">
                                    </div>

                                </figure>
                            </li>

                        </ul>
                        <ul class="carousel__thumbnails">
                            <li>
                                <label for="slide-1"><img src="~/images/img11.png" alt=""></label>
                            </li>
                            <li>
                                <label for="slide-2">
                                    <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-1.png"
                                         alt="">
                                </label>
                            </li>
                            <li>
                                <label for="slide-3">
                                    <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-2.png"
                                         alt="">
                                </label>
                            </li>
                            <li>
                                <label for="slide-4"><img src="~/images/image.png" alt=""></label>
                            </li>

                        </ul>
                    </div>
                </div>
            </section>
            <!-- image carausel end -->

        </div>

        <!-- Side Information -->

        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
            <div class="titlediv">
                <span class="title">@Model.missions.Title</span>
            </div>

            <div class="text">
                <span class="text">
                    @Model.missions.ShortDescription
                </span>
            </div>

            <div class="center-text">
                @if (Model.missions.MissionType == "goal")
                {
                    <span class="ispan"> @Model.goaltimestring</span>
                }
                else
                {
                    <span class="ispan">From @Model.missions.StartDate.ToString().Split(" ")[0] until @Model.missions.EndDate.ToString().Split(" ")[0]</span>
                }
            </div>

            <div class="d-flex targetInfo">

                <div class="d-flex flex-row align-items-center seatDiv">
                    <img src="~/images/Seats-left.png" alt="" class="" height="30px" width="30px">
                    <div class="d-flex flex-column ms-2">
                        <p class="d-inline mb-0 pt-2">10</p>
                        <p class="seat">Seats Left</p>
                    </div>
                </div>

                @if (Model.missions.MissionType == "time")
                {
                    <div class="d-flex flex-row align-items-center">
                        <img src="~/images/deadline.png" height="33px" width="33px" alt="">
                        <div class="d-flex flex-column ms-2">
                            <p class="d-inline mb-0 pt-2">@Model.missions.StartDate.ToString().Split(" ")[0]</p>
                            <p class="seat">Deadline</p>
                        </div>
                    </div>
                }

                else
                {
                    <div class="ms-auto me-2"><img src="~/images/achieved.png" class="mt-2"></div>
                    <div class="ms-2 me-5" stye="width:100%">
                        <div class="progress mt-2" role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-warning" style="width: 25%">25%</div>
                        </div>
                        <fs-5>Deadline</fs-5>
                    </div>
                }


            </div>

            <hr>


            <div class="buttonii">

                @*Add to Favourite Button*@
                @if (ViewBag.favmission != null)
                {
                    <button class="btn addToFavouriteBtn" onclick="a11(@ViewBag.UserId,@ViewBag.mid)" id="fa">
                        <i class="bi bi-heart-fill" id="favfav"></i> &nbsp;<span id="favtext">Add to Favourite</span>
                    </button>
                }

                else
                {
                    <button class="addToFavouriteBtn" onclick="a11(@ViewBag.UserId,@ViewBag.mid)" id="fa">
                        <i class="bi bi-heart-fill" id="favfav" style="color:red"></i> &nbsp;<span id="favtext">Added to Favourite</span>
                    </button>
                }

                @*Recommend to a Co-Worker*@

                <button type="button" class="btn recommendetionBtn" data-bs-toggle="modal" data-bs-target="#myModal">
                    <img src="~/images/add1.png" alt="">
                    Recommend to a Co-Worker
                </button>

                <!-- The Modal -->
                <div class="modal" id="myModal">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Recommend to a Co-Worker</h4>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>

                            <!-- Modal body -->
                            <div class="table-wrapper-scroll-y my-custom-scrollbar">

                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col">Name</th>
                                            <th scope="col">Email</th>
                                            <th scope="col">Send An Invitation</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var c in ViewBag.User)
                                        {
                                            <tr>
                                                <td>@c.FirstName @c.LastName</td>
                                                <td>@c.Email</td>
                                                <td>
                                                    <a asp-action="recommendEmail" asp-controller="Home" asp-route-sID="@c.UserId" asp-route-m="@ViewBag.mid">
                                                        <button class="btn btn-primary">Send</button>
                                                    </a>
                                                </td>
                                            </tr>

                                        }
                                    </tbody>
                                </table>

                            </div>


                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                            </div>

                        </div>
                    </div>
                </div>



            </div>

            @*User Rating*@


            <div class="center-text mt-2">
                @if (@ViewBag.rate == null)
                {
                    <i class="bi bi-star-fill" id="1" onclick="myRate(@ViewBag.UserId,@ViewBag.mid,1)"></i>
                    <i class="bi bi-star-fill" id="2" onclick="myRate(@ViewBag.UserId,@ViewBag.mid,2)"></i>
                    <i class="bi bi-star-fill" id="3" onclick="myRate(@ViewBag.UserId,@ViewBag.mid,3)"></i>
                    <i class="bi bi-star-fill" id="4" onclick="myRate(@ViewBag.UserId,@ViewBag.mid,4)"></i>
                    <i class="bi bi-star-fill" id="5" onclick="myRate(@ViewBag.UserId,@ViewBag.mid,5)"></i>
                }

                else
                {
                    int j = 1;
                    @for (int i = 1; i < ViewBag.rate + 1; i++)
                    {
                        <i class="bi bi-star-fill" style="color:yellow" id=@i onclick="myRate(@ViewBag.UserId,@ViewBag.mid,@j)"></i>
                        j++;
                    }
                    @for (int i = ViewBag.rate + 1; i < 6; i++)
                    {
                        <i class="bi bi-star" id=@i onclick="myRate(@ViewBag.UserId,@ViewBag.mid,@j)"></i>
                        j++;
                    }
                }

            </div>

            <!------------->
            <div class="row gx-2 mt-2">
                <div class="col-3">
                    <div class="box1">
                        <div class="image">
                            <img src="~/images/pin1.png" alt="">
                        </div>
                        <div class="belowImg">
                            <span style="font-size: 13px; color: #757575;">City</span>
                            <span class="cityName" style="font-size: 15px;">@Model.cities.Name</span>
                        </div>
                    </div>
                </div>

                <div class="col-3">
                    <div class="box1">
                        <div class="image">
                            <img src="~/images/web.png" alt="">
                        </div>
                        <div class="belowimg">
                            <span style="font-size: 13px; color: #757575;">Theme</span>
                            <span class="theme" style="font-size: 15px;">@Model.themes.Title</span>
                        </div>
                    </div>
                </div>

                <div class="col-3">
                    <div class="box1">
                        <div class="image">
                            <img src="~/images/calender.png" alt="">
                        </div>
                        <div class="belowImg">
                            <span style="font-size: 13px; color: #757575;">Date</span>
                            <span class="timeline" style="font-size: 15px;">Ongoing <br> Opportunity</span>
                        </div>
                    </div>
                </div>

                <div class="col-3">
                    <div class="box1">
                        <div class="image">
                            <img src="~/images/organization.png" alt="">
                        </div>
                        <div class="belowImg">
                            <span style="font-size: 13px; color: #757575;">Organization</span>
                            <span class="organizationName" style="font-size: 15px;">@Model.missions.OrganizationName</span>
                        </div>
                    </div>
                </div>
            </div>

            <!------------->
            <div class="apply  mt-2 d-flex">
                <button class="buttonsi py-2" id="applybtn" onclick="apply(@ViewBag.mid)">
                    Apply Now &nbsp <img src="images/right-arrow.png" alt="" />
                </button>
            </div>

        </div>

    </div>
</div>

<!--Middle Part -->

<div class="container mt-5 mb-5">
    <div class="row">

        <!-- Tabs -->

        <div class="col-lg-7  col-md-12 leftDiv">

            <!--Tab Navbar Section-->
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab"
                            data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home"
                            aria-selected="true">
                        Missions
                    </button>
                    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile"
                            type="button" role="tab" aria-controls="nav-profile"
                            aria-selected="false">
                        Organization
                    </button>
                    <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact"
                            type="button" role="tab" aria-controls="nav-contact" aria-selected="false">
                        Comments
                    </button>
                </div>
            </nav>

            <!--Navbar Detail Section -->
            <div class="tab-content mt-2" id="nav-tabContent">

                <!--Mission Section-->

                <div class="tab-pane fade show active missionTab" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">

                    <span>Introduction</span>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
                        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </p>

                    <span>Challenge</span>
                    <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident quaerat nostrum quod
                        laboriosam modi quia aliquam, dolorum magnam tempore deleniti praesentium facere eveniet,
                        aperiam vitae expedita quae, molestias eius perferendis? Quisquam, molestiae!
                    </p>
                    <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi, eius dignissimos. Excepturi
                        sequi earum itaque, delectus soluta exercitationem libero ipsa a modi reprehenderit atque
                        labore similique corrupti aliquid cupiditate distinctio praesentium minima?
                    </p>

                    <span>Documents</span>
                    <div class="documentsclass d-flex flex-wrap">
                        @if (Model.missionDocuments.Count() == 0)
                        {
                            <span>NO DOCUMENTS AVAILABLE</span>
                        }
                        @foreach (var i in Model.missionDocuments)
                        {

                            <div class="ms-2 d-inline">
                                <a href="@i.DocumentPath" target="_blank" style="text-decoration:none; color:black">
                                    <img src="~/images/pdf.png" alt="" />
                                    <span>lorem-ipsum.pdf</span>
                                </a>
                            </div>
                        }
                    </div>
                </div>

                <!--Organization Section-->

                <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                    <p>
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
                        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
                        mollit anim id est laborum.
                    </p>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
                        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </p>

                </div>


                <!--Add Comment section-->
                <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">

                    <textarea name="commentArea" id="commentArea" cols="" rows="5" placeholder="  Enter your comments..." style="width: 100%;" maxlength="600"></textarea>
                    <input type="text" value=@ViewBag.mid id="mid" name="mid" hidden />
                    <div class="mt-2">
                        <button class="buttonsi py-2" type="" onclick="addcomment(@ViewBag.mid)">Post Comment</button>
                    </div>

                    <div class="commentDiv bg-light rounded-3  p-4 mt-3" id="shcomment">
                        @if (ViewData["NoComment"] != null)
                        {
                            <span>@ViewData["NoComment"]</span>
                        }
                        @foreach (var i in Model.comments)
                        {
                            <div class="card d-flex flex-row align-items-center mt-3">

                                <div class="card-header1 mt-4 ms-2">
                                    <img src="~/images/volunteer2.png" alt="" class="commentImg" />
                                </div>

                                <div class="card-body">

                                    <h5 class="card-title">@i.User.FirstName</h5>
                                    <p style="font-size: 13px">@i.CreatedAt?.ToString("dddd, dd MMMM yyyy HH:mm")</p>
                                    <p class="card-text">@i.Commenttext</p>

                                </div>
                            </div>
                        }
                    </div>
                </div>

            </div>

        </div>

        <!-- Information & Recent Volunteers -->

        <div class="col-lg-5 col-md-12 rightDiv">

            <!--Information Div-->
            <div class="informationDiv">
                <div class="information">
                    <h4 style="color:#414141;">Information</h4>
                </div>
                <hr>
                <div class="skillDiv">
                    <p class="mb-0">Skills</p>
                    @if (!Model.MissionSkills.Any())
                    {
                        var j = "No Skills Required";
                        @j
                    }
                    @foreach (var i in Model.MissionSkills)
                    {
                        var j = "garbage";
                        @if (i == Model.MissionSkills.Last())
                        {
                            j = i.Skill.SkillName;
                        }
                        else
                        {
                            j = i.Skill.SkillName + ",  ";
                        }

                        @j

                    }
                </div>
                <hr>
                <div class="daysDiv">
                    <p class="mb-0">Days</p>
                    <p class="mb-0">Weekend only</p>
                </div>
                <hr>
                <div class="ratingDiv">
                    <p class="mb-0">Rating</p>
                    @if (@ViewBag.Ratingcount == null)
                    {
                        <span class="ms-2">No Ratings</span>
                    }
                    else
                    {

                        @for (int i = 0; i < ViewBag.Ratingcount; i++)
                        {
                            <img src="~/images/selected-star.png" alt="" />
                        }

                        @for (int i = 0; i < 5 - ViewBag.Ratingcount; i++)
                        {
                            <img src="~/images/star-empty.png" alt="" class="emptyStar" />
                        }

                        <span class="mb-0">(by @ViewBag.totalRating volunteers)</span>
                    }

                </div>
            </div>

            <!--Recent Volunteers Div-->
            <div class="recentVolunteersDiv">
                <div class="recentVolunteers">
                    <div class="volunteers">
                        <h4 style="color:#414141;">Recent Volunteers</h4>
                    </div>
                </div>
                <hr>
                @if (Model.users.Count() == 0)
                {
                    <span style="margin-left:20px">NO RECENT VOLUNTEERS</span>
                }
                <div class="volunteersImage">

                    @for (int i = 0; i < Model.users.Count(); i++)
                    {

                        <div class="imageDiv">
                            <img src="~/images/user-img.png" alt="">
                            <span>@Model.users.ElementAt(i).FirstName</span>
                        </div>
                    }

                </div>
            </div>
        </div>

    </div>
</div>

<hr />


<!--For the Related Missions-->
@if (ViewData["NoRelatedMission"] != null)
{
    <div class="container">
        <h4 class="d-flex justify-content-center mt-3"> @ViewData["NoRelatedMission"]</h4>
    </div>

}

else
{

    <div class="container">
        <h4 class="d-flex justify-content-center">Related Missions</h4>
    </div>

    <div class="container grid-container">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="myItems">

            @foreach (var item in Model.relatedMissions.Missions)
            {

                <div class="col ">
                    <div class="card h-100">

                        <div class="cardHead">

                            <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability.png" class="card-img" alt="...">
                            <div class="landing-page-top-right"><img src="~/images/pin.png" alt="">@item.City.Name</div>
                            <div class="landing-page-bottom-right d-flex flex-column">
                                <button class="mb-2 landing-page-btn-img">
                                    <img src="~/images/heart.png" alt="">
                                </button><button class="landing-page-btn-img">
                                    <img src="~/images/user.png"
                                 alt="">
                                </button>
                            </div>
                            <p class="shape">@item.Theme.Title</p>

                        </div>

                        <div class="cardBodyMain">
                            <div class="card-body mt-10">
                                <h4 class="card-title">@item.Title</h4>
                                <p class="card-text">
                                    @item.ShortDescription
                                </p>

                                <div class="cardBodyFooter">
                                    <p class="ngoName">@item.OrganizationName</p>
                                    <div class="rating">
                                        <img src="~/images/selected-star.png" alt="Rating">
                                        <img src="~/images/selected-star.png" alt="Rating">
                                        <img src="~/images/selected-star.png" alt="Rating">
                                        <img src="~/images/star.png" alt="Rating">
                                        <img src="~/images/star.png" alt="Rating">
                                    </div>
                                </div>
                            </div>

                            <div class="missionDurationDiv">
                                <hr class="durationLine">
                                <button class="missionDuration">From @item.StartDate.ToString().Split(" ")[0] until @item.EndDate.ToString().Split(" ")[0]</button>
                                <hr class="durationLine">
                            </div>

                            <div class="missionDeadLine  d-flex flex-row justify-content-between">
                                <div class="d-flex flex-row align-items-center">
                                    <img src="~/images/Seats-left.png" alt="" class="" height="30px" width="30px">
                                    <div class="d-flex flex-column ms-2">
                                        <p class="d-inline mb-0 pt-2">10</p>
                                        <p class="seat">Seats Left</p>
                                    </div>
                                </div>

                                @if (item.MissionType == "time")
                                {
                                    <div class="d-flex flex-row align-items-center">
                                        <img src="~/images/deadline.png" height="33px" width="33px" alt="">
                                        <div class="d-flex flex-column ms-2">
                                            <p class="d-inline mb-0 pt-2">@item.StartDate.ToString().Split(" ")[0]</p>
                                            <p class="seat">Deadline</p>
                                        </div>
                                    </div>
                                }

                                else
                                {
                                    <div class="ms-auto me-2"><img src="~/images/achieved.png" class="mt-2"></div>
                                    <div class="ms-2 me-5" stye="width:100%">
                                        <div class="progress mt-2" role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                            <div class="progress-bar bg-warning" style="width: 25%">25%</div>
                                        </div>
                                        <fs-5>Deadline</fs-5>
                                    </div>
                                }

                            </div>

                            <div class="card-footer d-flex justify-content-center" style="background-color: #ffffff;">
                                <a asp-action="volunteeringMission" asp-route-missID="@item.MissionId" class="applyBtn btn">Apply <img src="~/images/right-arrow.png" alt="Right Arrow"></a>
                            </div>
                        </div>

                    </div>
                </div>

            }

        </div>
    </div>

}
<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<script>

    //For Apply Mission
    $(document).ready(function () {
        console.log("ready document");
        //testfun();
        //debugger
        if (@Model.Applied== true) {
            $('#applybtn').text("Applied");
            $('#applybtn').css("color", "white");
            $('#applybtn').css("background", "green");
            $('#applybtn').css("border-color", "green");
            $('#applybtn').prop('disabled', true);
        }
    });


</script>
<script src="~/js/volunteering.js"></script>
